<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMR Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .result {
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>BMR Calculator</h1>
	
<div id="bmrResults">
    <p><label><input type="radio" name="bmr" value="harrisBenedict"> Harris-Benedict BMR: <span id="harrisBenedict"></span> kcal/day</label></p>
    <p><label><input type="radio" name="bmr" value="mifflinStJeor"> Mifflin-St Jeor BMR: <span id="mifflinStJeor"></span> kcal/day</label></p>
    <p><label><input type="radio" name="bmr" value="katchMcArdle"> Katch-McArdle BMR: <span id="katchMcArdle"></span> kcal/day</label></p>
    <button id="saveBMR">Save Selected BMR</button>
	<button class="btn" onclick="window.location.href='set_activity_level.html'">Activity Level</button>

</div>





<script>
    // Function to calculate BMR using different equations
    function calculateBMR(gender, age, height, weight, bodyFatPercent) {
        // Harris-Benedict Equation
        let harrisBenedict;
        if (gender === "Male") {
            harrisBenedict = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
        } else {
            harrisBenedict = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
        }

        // Mifflin-St Jeor Equation
        let mifflinStJeor = (10 * weight) + (6.25 * height) - (5 * age) + (gender === "Male" ? 5 : -161);

        // Katch-McArdle Equation with body fat adjustment
        let katchMcArdle = 370 + (21.6 * weight) * (1 - (bodyFatPercent / 100));

        return {
            harrisBenedict,
            mifflinStJeor,
            katchMcArdle
        };
    }

    // Retrieve profile statistics from local storage
    const profileStatistics = JSON.parse(localStorage.getItem('profileStatistics')) || {};

    // Check if profileStatistics is missing or incomplete
    if (!profileStatistics.gender || !profileStatistics.age || !profileStatistics.height || !profileStatistics.weight || !profileStatistics.bodyFatPercent) {
        // Display a message if data is missing or incomplete
        document.getElementById('bmrResults').innerHTML = '<p>Profile statistics are missing or incomplete. Please provide complete information.</p>';
    } else {
        // Calculate BMR
        const bmrResults = calculateBMR(profileStatistics.gender, profileStatistics.age, profileStatistics.height, profileStatistics.weight, profileStatistics.bodyFatPercent);

        // Display BMR results
        document.getElementById('harrisBenedict').textContent = bmrResults.harrisBenedict.toFixed(2);
        document.getElementById('mifflinStJeor').textContent = bmrResults.mifflinStJeor.toFixed(2);
        document.getElementById('katchMcArdle').textContent = bmrResults.katchMcArdle.toFixed(2);

        // Check for a saved BMR selection and set the corresponding radio button as checked
        if (profileStatistics.selectedBMR) {
            const selectedBMRInput = document.querySelector(`input[name="bmr"][value="${profileStatistics.selectedBMR}"]`);
            if (selectedBMRInput) {
                selectedBMRInput.checked = true;
            }
        }

        // Add event listener to the "Save Selected BMR" button
        document.getElementById('saveBMR').addEventListener('click', function() {
            const selectedBMR = document.querySelector('input[name="bmr"]:checked').value;
            if (selectedBMR) {
                // Directly set the selectedBMR property on the profileStatistics object
                profileStatistics.selectedBMR = selectedBMR;
                // Save the updated profileStatistics object back to localStorage
                localStorage.setItem('profileStatistics', JSON.stringify(profileStatistics));
                alert('Selected BMR saved successfully.');
            } else {
                alert('Please select a BMR calculation.');
            }
        });
    }
</script>


	
	
	
 
    </script>
</body>
</html>
